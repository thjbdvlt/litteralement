digraph {
    pad=1

    subgraph cluster_eav {
        style=dotted
        color=orange

        subgraph cluster_onto {
            color=none
            style=dotted

            concept [color=orange fontcolor=orange shape=box]
            type_propriete [shape=box color=orange fontcolor=orange]
            type_relation [shape=box color=orange fontcolor=orange]
            classe [shape=box color=orange fontcolor=orange]

            concept_nom [label=nom fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
            concept_definition [label=definition fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
            concept_id [label=id fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]

            type_relation -> concept [style=dashed arrowhead=empty color=orange]
            type_propriete -> concept [style=dashed arrowhead=empty color=orange]
            classe -> concept [style=dashed arrowhead=empty color=orange]

            concept -> concept_nom [dir=none color=grey]
            concept -> concept_definition [dir=none color=grey]
            concept -> concept_id [dir=none color=grey]
        }


        subgraph cluster_propriete {
            style=dotted
            color=none
            propriete [shape=box color=black fontcolor=black]

            subgraph cluster_texte {
                style=dotted
                color=none
                texte [shape=box color=black fontcolor=black]
                texte_val [label=val width=0.2 height=0.2 fontsize=10 color=grey fontcolor=grey]
                texte_id [label=id width=0.2 height=0.2 fontsize=10 color=grey fontcolor=grey]
                texte_val -> texte [color=grey dir=none]
                texte_id -> texte [color=grey dir=none]
            }

            subgraph cluster_date {
                style=dotted
                color=none
                prop_date [shape=box color=black fontcolor=black]
                prop_date_val [label=val width=0.2 height=0.2 fontsize=10 color=grey fontcolor=grey]
                prop_date_val -> prop_date [color=grey dir=none]
            }

            subgraph cluster_float {
                style=dotted
                color=none
                prop_float [shape=box color=black fontcolor=black]
                prop_float_val [label=val width=0.2 height=0.2 fontsize=10 color=grey fontcolor=grey]

                {rank=same; prop_date; prop_float; texte}
                prop_float_val -> prop_float [color=grey dir=none]
            }
            prop_date -> propriete [style=dashed arrowhead=empty color=black]
            texte -> propriete [style=dashed arrowhead=empty color=black]
            prop_float -> propriete [style=dashed arrowhead=empty color=black]
        }

        subgraph cluster_entity_relation {
            style=dotted
            color=none
            relation [shape=box color=black fontcolor=black]

            subgraph cluster_ent {
                entite [shape=box color=black fontcolor=black]
                entite_id [label=id fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                entite -> entite_id [dir=none color=grey]
            }

            relation -> entite:nw [label=sujet color=black fontcolor=black fontsize=10]
            relation -> entite [label=objet color=black fontcolor=black fontsize=10]
        }

        {rank=same; entite; entite_id}
        entite -> classe [label=est_instance_de color=orange fontcolor=orange fontsize=10]
        relation -> type_relation [label=a color=orange fontcolor=orange fontsize=10]
        propriete -> type_propriete [label=a color=orange fontcolor=orange fontsize=10]
        propriete -> entite [label=qualifie color=black fontcolor=black fontsize=10]
    }


    subgraph cluster_nlp {
        color=turquoise
        style=dotted

        phrase [shape=box color=turquoise fontcolor=turquoise]

        // phrase -> segment [style=dashed color=turquoise arrowhead=empty]
        segment -> phrase [style=dashed dir=back color=turquoise arrowhead=empty arrowtail=empty]

        subgraph cluster_seg {
            color=none
            segment [shape=box color=turquoise fontcolor=turquoise]
            segment -> texte [label=dans color=turquoise fontcolor=turquoise fontsize=10]
            segment_debut [label=debut fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
            segment_fin [label=fin fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
            segment -> segment_fin [dir=none color=grey]
            segment -> segment_debut [dir=none color=grey]
        }

        subgraph cluster_token {
            color=none
            token [shape=box color=turquoise fontcolor=turquoise]
            token_num [label=num fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
            token -> token_num [dir=none color=grey]
            token -> mot [style=dashed dir=back color=turquoise arrowtail=empty]
            segment -> token [style=dashed dir=back color=turquoise arrowtail=empty]
        }

        subgraph cluster_mot {
            color=none

            mot [shape=box color=turquoise fontcolor=turquoise]

            mot -> fonction [label=a color=violet fontcolor=violet fontsize=10]
            mot_noyau [label=noyau fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
            mot -> mot_noyau [dir=none color=grey]
            mot -> lexeme [label=est_instance_de color=violet fontcolor=violet fontsize=10]

            subgraph cluster_lexeme {
                color=none

                lexeme [shape=box color=violet fontcolor=violet]

                subgraph cluster_nature {
                    nature [shape=box color=violet fontcolor=violet]
                    nature_id [label=id fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                    nature_nom [label=nom fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                    nature -> nature_nom [dir=none color=grey]
                    nature -> nature_id [dir=none color=grey]
                }

                subgraph cluster_fonction {
                    fonction [shape=box color=violet fontcolor=violet]
                    fonction_id [label=id fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                    fonction_nom [label=nom fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                    fonction -> fonction_id [dir=none color=grey]
                    fonction -> fonction_nom [dir=none color=grey]
                }

                subgraph cluster_morph {
                    morph [shape=box color=violet fontcolor=violet]
                    morph_id [label=id fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                    morph_feats [label=feats fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                    morph -> morph_id [dir=none color=grey]
                    morph -> morph_feats [dir=none color=grey]
                }

                subgraph cluster_lemme {
                    lemme [shape=box color=violet fontcolor=violet]
                    lemme_id [label=id fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                    lemme_graphie [label=graphie fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                    lemme -> lemme_id [dir=none color=grey]
                    lemme -> lemme_graphie [dir=none color=grey]
                    lemme -> lemme_vec [dir=none color=grey]
                    lemme_vec [label=vector fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                }

                lexeme -> nature [label=a color=violet fontcolor=violet fontsize=10]
                lexeme -> morph [label=a color=violet fontcolor=violet fontsize=10]
                lexeme -> lemme [label=a color=violet fontcolor=violet fontsize=10]

                lexeme_id [label=id fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                lexeme_norme [label=norme fontsize=10 width=0.2 height=0.2 color=grey fontcolor=grey]
                lexeme -> lexeme_id [dir=none color=grey]
                lexeme -> lexeme_norme [dir=none color=grey]

            }
        }
    }
}
